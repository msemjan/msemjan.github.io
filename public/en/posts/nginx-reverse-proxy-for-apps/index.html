<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="robots" content="index, follow"><meta name="author" content="Marek Semjan">
<meta name="description" content="">
<link rel="author" type="text/plain" href="/blog/humans.txt">
<link rel="apple-touch-icon" sizes="180x180" href="/blog/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/blog/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/blog/favicon-16x16.png">
<link rel="manifest" href="/blog/site.webmanifest">
<meta name="msapplication-TileImage" content="/blog/mstile-144x144.png">
<meta name="theme-color" content="#494f5c">
<meta name="msapplication-TileColor" content="#494f5c">
<link rel="mask-icon" href="/blog/safari-pinned-tab.svg" color="#494f5c">

  <meta itemprop="name" content="Nginx Reverse Proxy for Apps">
  <meta itemprop="description" content="Have you ever found yourself in the following situation: You have a application that is running locally on your computer (e.g. Raspberry Pi) and you want to access it from your other devices. When you make a request on http://localhost:PORT/SOME_ENDPOINT from the computer on which the application runs, it is successful, but when you use other device, the website can not be found. If yes, than this is an article for you!">
  <meta itemprop="datePublished" content="2024-05-26T19:52:00+02:00">
  <meta itemprop="dateModified" content="2024-05-26T19:52:00+02:00">
  <meta itemprop="wordCount" content="1081">
  <meta itemprop="keywords" content="NGINX,Reverse Proxy,REST API"><meta property="og:url" content="https://msemjan.github.io/blog/en/posts/nginx-reverse-proxy-for-apps/">
  <meta property="og:site_name" content="Marek&#39;s Blog (ᵔ◡ᵔ)	">
  <meta property="og:title" content="Nginx Reverse Proxy for Apps">
  <meta property="og:description" content="Have you ever found yourself in the following situation: You have a application that is running locally on your computer (e.g. Raspberry Pi) and you want to access it from your other devices. When you make a request on http://localhost:PORT/SOME_ENDPOINT from the computer on which the application runs, it is successful, but when you use other device, the website can not be found. If yes, than this is an article for you!">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-26T19:52:00+02:00">
    <meta property="article:modified_time" content="2024-05-26T19:52:00+02:00">
    <meta property="article:tag" content="NGINX">
    <meta property="article:tag" content="Reverse Proxy">
    <meta property="article:tag" content="REST API">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Nginx Reverse Proxy for Apps">
  <meta name="twitter:description" content="Have you ever found yourself in the following situation: You have a application that is running locally on your computer (e.g. Raspberry Pi) and you want to access it from your other devices. When you make a request on http://localhost:PORT/SOME_ENDPOINT from the computer on which the application runs, it is successful, but when you use other device, the website can not be found. If yes, than this is an article for you!">

<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Nginx Reverse Proxy for Apps",
    "name": "Nginx Reverse Proxy for Apps",
    "description": "Have you ever found yourself in the following situation: You have a application that is running locally on your computer (e.g. Raspberry Pi) and you want to access it from your other devices. When you make a request on http://localhost:PORT/SOME_ENDPOINT from the computer on which the application runs, it is successful, but when you use other device, the website can not be found. If yes, than this is an article for you!",
    "keywords": ["NGINX", "Reverse Proxy", "REST API"],
    "articleBody": "Introduction Have you ever found yourself in the following situation: You have a application that is running locally on your computer (e.g. Raspberry Pi) and you want to access it from your other devices. When you make a request on http://localhost:PORT/SOME_ENDPOINT from the computer on which the application runs, it is successful, but when you use other device, the website can not be found.\nYes? Then you are in the right place, because I will show you how to set-up a reverse proxy on NGINX server that will forward requests from the other devices to your application. NGINX has several other functions that make it extremely useful, including reverse proxy server, a mail proxy server, a load balancer, and a generic TCP/UDP proxy server. However, we will focus on the reverse proxy and it’s settings.\nFor simplicity, I will show an example for Raspberry Pi running Raspberry OS. However, the process would be similar for other Linux distribution.\nInstalling NGINX Since there is a package for NGINX server in the default Raspberry repository, you can simply run:\nsudo apt update \u0026\u0026 sudo apt upgrade sudo apt install nginx Once installed, you can use NGINX for hosting static websites by copying the website files to /var/www/html, but that is not why we installed it.\nIt is also good idea to configure NGINX to start on the startup/reboot by running the following commands:\nsudo systemctl start nginx sudo systemctl enable nginx You can than check if the NGINX is running with:\nsudo systemctl status nginx If it is running, you should see active (running) next to the Active.\nSetting Up Reverse Proxy When NGINX proxies a request, it sends it to a specific server defined in a configuration file, and sends whatever response it gets back to the client. Setting up NGINX as a reverse proxy is very easy.\nWe will use and edit the default configuration file. Some guides suggest that you should unlink it, and create a new one, but I think it is sufficient to create a copy in case of any issues by running:\ncp /etc/nginx/sites-available/default /etc/nginx/sites-available/default.backup The configuration file can be found at /etc/nginx/sites-available/default. Open it with your favorite text editor and add a new location directive in the default server configuration. In the end, the configuration should looks something like this (I removed the comments that were there by default):\nserver { listen 80 default_server; listen [::]:80 default_server; root /var/www/html; index index.html index.htm index.nginx-debian.html; server_name _; location / { try_files $uri $uri/ =404; } location /api { rewrite ^/api/(.*) /$1 break; proxy_pass http://localhost:8081; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; } } The added part was:\nlocation /api { rewrite ^/api/(.*) /$1 break; proxy_pass http://localhost:8081; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; } Explanation:\nserver sets configuration for a virtual server. There can be several servers in a single configuration file. server_name specifies the name of the virtual server. Several names can be specified (separated by spaces), and wildcards and regular expressions for names are allowed. In our case it is _ listen directive sets the address and port for IP, or the path for a UNIX-domain socket on which the server will accept requests. In our case we will listen on port 80. If there is default_server, than the server will become the default server for the specified address and port The default location / blog makes server try to serve files from a specified URI or return 404 HTTP status. The added location /api specifies that we want to redirect any request sent to http://SERVER_IP/api/... http://localhost:8081/... (if your application runs somewhere else, e.g. on a different port, modify the configuration). I’ve also added rewrite ^/api/(.*) /$1 break; line, which strictly speaking, is not necessary, but without it the forwarded requests have the /api/... part and I wanted to remove it. Basically, it is a regex that strips the beginning of the path (/api) and leaves the rest proxy_pass directive specifies the inside location. In this case it is an application that is running on the http://127.0.0.1:8080. Another option in the location, proxy_set_header, which allows us to redefine or append fields to the request header passed to the proxied server. The proxy_set_header is followed by the field name and the value. As you can see, we are also using variables (the values that start with $ sign). These values are inherited from the previous configuration level, if they are not defined on the current level. Only two fields are redefined by default: proxy_set_header Host $proxy_host; proxy_set_header Connection close; The fields that are add in the configuration are rather self-explanatory. To prevent the header from being passed, you can set it to an empty string (e.g. proxy_set_header Accept-Encoding \"\";). Than you can restart the NGINX server to use the updated configuration file:\nsudo systemctl restart nginx And finally, you can test the configuration syntax by making a HTTP request to http://SERVER_IP/api/.... You can get the SERVER_IP address by running the following command in the Raspberry Pi’s terminal:\nhostname -I If you don’t have an application to try it with, you can use this simple “Hello World” server written in Go (you need Go compiler, though). Just create a main.go file and paste the following code:\npackage main import ( \"fmt\" \"net/http\" ) func main() { http.HandleFunc(\"/\", HelloServer) http.ListenAndServe(\":8081\", nil) } func HelloServer(w http.ResponseWriter, r *http.Request) { name := r.URL.Path[1:] if len(name) == 0 { fmt.Fprintf(w, \"Hello World!\") return } fmt.Fprintf(w, \"Hello, %s!\", name) } You can run it with:\ngo run main.go The request made on http://SERVER_IP/api should return Hello world message. You can also add your name for a personalized message: http://SERVER_IP/api/YOUR_NAME 🙂.\nConclusion Setting up NGINX as a reverse proxy is very useful and can help you expose your services and applications to local network. NGINX is used by ordinary tech enthusiasts, small, and large business. I believe that having a basic working knowledge of setting up things like reverse proxy, load balancing, content caching, and other NGINX functionality is an amazing skill to have.\nIn this tutorial I showed the minimal settings needed for exposing local applications to the local network, but I left some things out for simplicity. If you need to use more advanced settings, such as configuration of buffers or choosing an outgoing IP address, check a NGINX documentation1 or a NGINX tutorial2 that goes more in-depth.\nFurther Reading 📚️ nginx documentation. (n.d.). https://nginx.org/en/docs/ ↩︎\nNGINX Reverse Proxy. (n.d.). NGINX Documentation. https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/ ↩︎\n",
    "wordCount" : "1081",
    "inLanguage": "en",
    "datePublished": "2024-05-26T19:52:00+02:00",
    "dateModified": "2024-05-26T19:52:00+02:00",
    "author":{
        "@type": "Person",
        "name": "Marek Semjan",},
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://msemjan.github.io/blog/en/posts/nginx-reverse-proxy-for-apps/"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Marek's Blog (ᵔ◡ᵔ)\t",
      "description": "",
      "logo": {
        "@type": "ImageObject",
        "url": "https://msemjan.github.io/blog/favicon.ico"
      }
    }
}
</script><title>Nginx Reverse Proxy for Apps</title>
<link rel="stylesheet dns-prefetch preconnect preload prefetch" as="style" media="screen" href="https://msemjan.github.io/blog/css/style.min.79f5321746ef35da811f1eca23ddd5ec79443b5791c00351fdf10459a0d51bb5.css" integrity="sha256-efUyF0bvNdqBHx7KI93V7HlEO1eRwANR/fEEWaDVG7U=" crossorigin="anonymous">
	</head>
<body id="page">
	<header id="site-header">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://msemjan.github.io/blog/">Marek&#39;s Blog (ᵔ◡ᵔ)	</a>
				</div>
				<nav class="site-nav hide-in-mobile"><a href="https://msemjan.github.io/blog/en/posts/">Posts</a><a href="https://msemjan.github.io/blog/en/about-hugo/">About</a></nav>
			</div>
			<div class="hdr-right hdr-icons">
				<span class="hdr-links hide-in-mobile"><a href="https://sk.linkedin.com/in/marek-semjan-12497a26a" target="_blank" rel="noopener me" title="Linkedin"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none"
   stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
   <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
   <rect x="2" y="9" width="4" height="12"></rect>
   <circle cx="4" cy="4" r="2"></circle>
</svg></a><a href="https://github.com/msemjan" target="_blank" rel="noopener me" title="Github"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none"
   stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
   <path
      d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
   </path>
</svg></a><a href="https://www.researchgate.net/profile/Marek-Semjan-2" target="_blank" rel="noopener me" title="Researchgate"><svg xmlns="http://www.w3.org/2000/svg" class="feather feather-link" width="24" height="24" viewBox="0 0 24 24"
      fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
      <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
   </svg></a></span><button id="share-btn" class="hdr-btn" title=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-share-2">
      <circle cx="18" cy="5" r="3"></circle>
      <circle cx="6" cy="12" r="3"></circle>
      <circle cx="18" cy="19" r="3"></circle>
      <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
      <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
   </svg></button>
 
<div id="share-links" class="animated fast">
    
    
    
    
    <ul>
        <li>
            <a href="https://twitter.com/intent/tweet?hashtags=hermit2&amp;url=https%3a%2f%2fmsemjan.github.io%2fblog%2fen%2fposts%2fnginx-reverse-proxy-for-apps%2f&amp;text=Nginx%20Reverse%20Proxy%20for%20Apps" target="_blank" rel="noopener" aria-label="Share on X"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none"
   stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
   <path class="st0" d="m21.3 21.1 -11.4 -18.2h-7.2l11.4 18.2zm-18.6 0 7.2 -6.6m4.2 -5 7.2 -6.6" />
</svg></a>
        </li>
        <li>
            <a href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fmsemjan.github.io%2fblog%2fen%2fposts%2fnginx-reverse-proxy-for-apps%2f" target="_blank" rel="noopener" aria-label="Share on Facebook"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none"
   stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
   <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
</svg></a>
        </li>
        <li>
            <a href="mailto:?subject=Nginx%20Reverse%20Proxy%20for%20Apps&amp;body=https%3a%2f%2fmsemjan.github.io%2fblog%2fen%2fposts%2fnginx-reverse-proxy-for-apps%2f" target="_self" rel="noopener" aria-label="Share on Email"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none"
   stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
   <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
   <polyline points="22,6 12,13 2,6"></polyline>
</svg></a>
        </li>
        <li>
            <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fmsemjan.github.io%2fblog%2fen%2fposts%2fnginx-reverse-proxy-for-apps%2f&amp;source=https%3a%2f%2fmsemjan.github.io%2fblog%2f&amp;title=Nginx%20Reverse%20Proxy%20for%20Apps&amp;summary=Nginx%20Reverse%20Proxy%20for%20Apps%2c%20by%20Marek%20Semjan%0a%0a%3cnil%3e%0a" target="_blank" rel="noopener" aria-label="Share on LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none"
   stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
   <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
   <rect x="2" y="9" width="4" height="12"></rect>
   <circle cx="4" cy="4" r="2"></circle>
</svg></a>
        </li>
        <li>
            <a href="#" onclick="linkShare(&#34;Nginx Reverse Proxy for Apps&#34;,&#34;https://msemjan.github.io/blog/en/posts/nginx-reverse-proxy-for-apps/&#34;,&#34;Nginx Reverse Proxy for Apps, by Marek Semjan\n\n\u003cnil\u003e\n&#34;); return false;" target="_self" rel="noopener" aria-label="Copy Link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy">
      <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
      <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
   </svg></a>
        </li>
    </ul>
</div><button id="menu-btn" class="hdr-btn" title=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
   </svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://msemjan.github.io/blog/en/posts/">Posts</a></li>
			<li><a href="https://msemjan.github.io/blog/en/about-hugo/">About</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster"><article class="thin">
			<header class="post-header">
				<div class="post-date"><span>May 26, 2024</span></div>
				<h1>Nginx Reverse Proxy for Apps</h1>
			</header>
			<div class="post-description"><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
   stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-feather">
   <path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path>
   <line x1="16" y1="8" x2="2" y2="22"></line>
   <line x1="17.5" y1="15" x2="9" y2="15"></line>
</svg>Marek Semjan</p>
<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon">
      <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
      <line x1="7" y1="7" x2="7" y2="7"></line>
   </svg><span class="tag"><a href="https://msemjan.github.io/blog/en/tags/nginx">NGINX</a></span><span class="tag"><a href="https://msemjan.github.io/blog/en/tags/reverse-proxy">Reverse Proxy</a></span><span class="tag"><a href="https://msemjan.github.io/blog/en/tags/rest-api">REST API</a></span></p>
<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
      <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
      <polyline points="14 2 14 8 20 8"></polyline>
      <line x1="16" y1="13" x2="8" y2="13"></line>
      <line x1="16" y1="17" x2="8" y2="17"></line>
      <polyline points="10 9 9 9 8 9"></polyline>
   </svg>1081&nbsp  •4 Minutes, 54 Seconds</p>
<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
      <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
      <line x1="16" y1="2" x2="16" y2="6"></line>
      <line x1="8" y1="2" x2="8" y2="6"></line>
      <line x1="3" y1="10" x2="21" y2="10"></line>
   </svg>2024-05-26 19:52 &#43;0200
</p></div>
			<hr class="post-end">
			<div class="content">
				 <h2 id="introduction">Introduction<a href="#introduction" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
      stroke-linecap="round" stroke-linejoin="round">
      <path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path>
      <line x1="8" y1="12" x2="16" y2="12"></line>
   </svg></a></h2>
<p>Have you ever found yourself in the following situation: You have a application that is running locally on your computer (e.g. Raspberry Pi) and you want to access it from your other devices. When you make a request on <code>http://localhost:PORT/SOME_ENDPOINT</code> from the computer on which the application runs, it is successful, but when you use other device, the website can not be found.</p>
<p>Yes? Then you are in the right place, because I will show you how to set-up a reverse proxy on NGINX server that will forward requests from the other devices to your application. NGINX has several other functions that make it extremely useful, including reverse proxy server, a mail proxy server, a load balancer, and a generic TCP/UDP proxy server. However, we will focus on the reverse proxy and it&rsquo;s settings.</p>
<p>For simplicity, I will show an example for Raspberry Pi running Raspberry OS. However, the process would be similar for other Linux distribution.</p>
<h2 id="installing-nginx">Installing NGINX<a href="#installing-nginx" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
      stroke-linecap="round" stroke-linejoin="round">
      <path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path>
      <line x1="8" y1="12" x2="16" y2="12"></line>
   </svg></a></h2>
<p>Since there is a package for NGINX server in the default Raspberry repository, you can simply run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt update <span style="color:#f92672">&amp;&amp;</span> sudo apt upgrade
</span></span><span style="display:flex;"><span>sudo apt install nginx
</span></span></code></pre></div><p>Once installed, you can use NGINX for hosting static websites by copying the website files to <code>/var/www/html</code>, but that is not why we installed it.</p>
<p>It is also good idea to configure NGINX to start on the startup/reboot by running the following commands:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl start nginx
</span></span><span style="display:flex;"><span>sudo systemctl enable nginx
</span></span></code></pre></div><p>You can than check if the NGINX is running with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl status nginx
</span></span></code></pre></div><p>If it is running, you should see <code>active (running)</code> next to the <code>Active</code>.</p>
<h2 id="setting-up-reverse-proxy">Setting Up Reverse Proxy<a href="#setting-up-reverse-proxy" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
      stroke-linecap="round" stroke-linejoin="round">
      <path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path>
      <line x1="8" y1="12" x2="16" y2="12"></line>
   </svg></a></h2>
<p>When NGINX proxies a request, it sends it to a specific server defined in a configuration file, and sends whatever response it gets back to the client. Setting up NGINX as a reverse proxy is very easy.</p>
<p>We will use and edit the default configuration file. Some guides suggest that you should unlink it, and create a new one, but I think it is sufficient to create a copy in case of any issues by running:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cp /etc/nginx/sites-available/default /etc/nginx/sites-available/default.backup
</span></span></code></pre></div><p>The configuration file can be found at <code>/etc/nginx/sites-available/default</code>. Open it with your favorite text editor and add a new <code>location</code> directive in the default server configuration. In the end, the configuration should looks something like this (I removed the comments that were there by default):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">server</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">listen</span> <span style="color:#ae81ff">80</span> <span style="color:#e6db74">default_server</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">listen</span> <span style="color:#e6db74">[::]:80</span> <span style="color:#e6db74">default_server</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">root</span> <span style="color:#e6db74">/var/www/html</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">index</span> <span style="color:#e6db74">index.html</span> <span style="color:#e6db74">index.htm</span> <span style="color:#e6db74">index.nginx-debian.html</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">server_name</span> <span style="color:#e6db74">_</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">location</span> <span style="color:#e6db74">/</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">try_files</span> $uri $uri/ =<span style="color:#ae81ff">404</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">location</span> <span style="color:#e6db74">/api</span> {
</span></span><span style="display:flex;"><span>		 <span style="color:#f92672">rewrite</span> <span style="color:#e6db74">^/api/(.*)</span> <span style="color:#e6db74">/</span>$1  <span style="color:#e6db74">break</span>;
</span></span><span style="display:flex;"><span>		 <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://localhost:8081</span>;
</span></span><span style="display:flex;"><span>		 <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Host</span> $host;
</span></span><span style="display:flex;"><span>		 <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Real-IP</span> $remote_addr;
</span></span><span style="display:flex;"><span>		 <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-For</span> $proxy_add_x_forwarded_for;
</span></span><span style="display:flex;"><span>		 <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-Proto</span> $scheme;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The added part was:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span>	<span style="color:#66d9ef">location</span> <span style="color:#e6db74">/api</span> {
</span></span><span style="display:flex;"><span>		 <span style="color:#f92672">rewrite</span> <span style="color:#e6db74">^/api/(.*)</span> <span style="color:#e6db74">/</span>$1  <span style="color:#e6db74">break</span>;
</span></span><span style="display:flex;"><span>		 <span style="color:#f92672">proxy_pass</span> <span style="color:#e6db74">http://localhost:8081</span>;
</span></span><span style="display:flex;"><span>		 <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">Host</span> $host;
</span></span><span style="display:flex;"><span>		 <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Real-IP</span> $remote_addr;
</span></span><span style="display:flex;"><span>		 <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-For</span> $proxy_add_x_forwarded_for;
</span></span><span style="display:flex;"><span>		 <span style="color:#f92672">proxy_set_header</span> <span style="color:#e6db74">X-Forwarded-Proto</span> $scheme;
</span></span><span style="display:flex;"><span>	}
</span></span></code></pre></div><p>Explanation:</p>
<ul>
<li><code>server</code> sets configuration for a virtual server. There can be several servers in a single configuration file.</li>
<li><code>server_name</code> specifies the name of the virtual server. Several names can be specified (separated by spaces), and wildcards and regular expressions for names are allowed. In our case it is <code>_</code></li>
<li><code>listen</code> directive sets the address and port for IP, or the path for a UNIX-domain socket on which the server will accept requests. In our case we will listen on port <code>80</code>. If there is <code>default_server</code>, than the server will become the default server for the specified address and port</li>
<li>The default <code>location /</code> blog makes server try to serve files from a specified URI or return 404 HTTP status.</li>
<li>The added <code>location /api</code> specifies that we want to redirect any request sent to <code>http://SERVER_IP/api/...</code> <code>http://localhost:8081/...</code> (if your application runs somewhere else, e.g. on a different port, modify the configuration).</li>
<li>I&rsquo;ve also added <code>rewrite ^/api/(.*) /$1  break;</code> line, which strictly speaking, is not necessary, but without it the forwarded requests have the <code>/api/...</code> part and I wanted to remove it. Basically, it is a regex that strips the beginning of the path (<code>/api</code>) and leaves the rest</li>
<li><code>proxy_pass</code> directive specifies the inside location. In this case it is an application that is running on the <code>http://127.0.0.1:8080</code>.</li>
<li>Another option in the <code>location</code>, <code>proxy_set_header</code>, which allows us to redefine or append fields to the request header passed to the proxied server. The <code>proxy_set_header</code> is followed by the field name and the value. As you can see, we are also using variables (the values that start with <code>$</code> sign). These values are inherited from the previous configuration level, if they are not defined on the current level. Only two fields are redefined by default:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-nginx" data-lang="nginx"><span style="display:flex;"><span><span style="color:#66d9ef">proxy_set_header</span> <span style="color:#e6db74">Host</span>       $proxy_host;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">proxy_set_header</span> <span style="color:#e6db74">Connection</span> <span style="color:#e6db74">close</span>;
</span></span></code></pre></div>The fields that are add in the configuration are rather self-explanatory. To prevent the header from being passed, you can set it to an empty string (e.g. <code>proxy_set_header Accept-Encoding &quot;&quot;;</code>).</li>
</ul>
<p>Than you can restart the NGINX server to use the updated configuration file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl restart nginx
</span></span></code></pre></div><p>And finally, you can test the configuration syntax by making a HTTP request to <code>http://SERVER_IP/api/...</code>. You can get the <code>SERVER_IP</code> address by running the following command in the Raspberry Pi&rsquo;s terminal:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>hostname -I
</span></span></code></pre></div><p>If you don&rsquo;t have an application to try it with, you can use this simple &ldquo;Hello World&rdquo; server written in Go (you need Go compiler, though). Just create a <code>main.go</code> file and paste the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e6db74">&#34;net/http&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">HandleFunc</span>(<span style="color:#e6db74">&#34;/&#34;</span>, <span style="color:#a6e22e">HelloServer</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ListenAndServe</span>(<span style="color:#e6db74">&#34;:8081&#34;</span>, <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">HelloServer</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">name</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">URL</span>.<span style="color:#a6e22e">Path</span>[<span style="color:#ae81ff">1</span>:]
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">name</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Fprintf</span>(<span style="color:#a6e22e">w</span>, <span style="color:#e6db74">&#34;Hello World!&#34;</span>)
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Fprintf</span>(<span style="color:#a6e22e">w</span>, <span style="color:#e6db74">&#34;Hello, %s!&#34;</span>, <span style="color:#a6e22e">name</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>You can run it with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>go run main.go
</span></span></code></pre></div><p>The request made on <code>http://SERVER_IP/api</code> should return <code>Hello world</code> message. You can also add your name for a personalized message: <code>http://SERVER_IP/api/YOUR_NAME</code> 🙂.</p>
<h2 id="conclusion">Conclusion<a href="#conclusion" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
      stroke-linecap="round" stroke-linejoin="round">
      <path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path>
      <line x1="8" y1="12" x2="16" y2="12"></line>
   </svg></a></h2>
<p>Setting up NGINX as a reverse proxy is very useful and can help you expose your services and applications to local network. NGINX is used by ordinary tech enthusiasts, small, and large business. I believe that having a basic working knowledge of setting up things like reverse proxy, load balancing, content caching, and other NGINX functionality is an amazing skill to have.</p>
<p>In this tutorial I showed the minimal settings needed for exposing local applications to the local network, but I left some things out for simplicity. If you need to use more advanced settings, such as configuration of buffers or choosing an outgoing IP address, check a NGINX documentation<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup> or a NGINX tutorial<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup> that goes more in-depth.</p>
<h2 id="further-reading-">Further Reading 📚️<a href="#further-reading-" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
      stroke-linecap="round" stroke-linejoin="round">
      <path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path>
      <line x1="8" y1="12" x2="16" y2="12"></line>
   </svg></a></h2>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><em>nginx documentation</em>. (n.d.). <a href="https://nginx.org/en/docs/">https://nginx.org/en/docs/</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p><em>NGINX Reverse Proxy</em>. (n.d.). NGINX Documentation. <a href="https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/">https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/</a>&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

			</div>
			

		</article>
		<div class="post-nav thin">
			<a class="next-post" href="https://msemjan.github.io/blog/en/posts/docker-compose-watch/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left">
      <line x1="19" y1="12" x2="5" y2="12"></line>
      <polyline points="12 19 5 12 12 5"></polyline>
   </svg>&nbsp;</span><br><span>Docker Compose Watch</span>
			</a>
			<a class="prev-post" href="https://msemjan.github.io/blog/en/posts/golang-validation/">
				<span class="post-nav-label">&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right">
      <line x1="5" y1="12" x2="19" y2="12"></line>
      <polyline points="12 5 19 12 12 19"></polyline>
   </svg></span><br><span>Validation In Go Programming Language</span>
			</a>
		</div>
		<div id="comments" class="thin"></div>
	</main>
<footer id="site-footer" class="section-inner thin animated fadeIn faster">
<p>
	&copy; 2025 <a href="https://msemjan.github.io/blog/">Marek&#39;s Blog (ᵔ◡ᵔ)	</a>
	&#183; Copyright © 2024 Marek Semjan. All Rights Reserved.&#183; Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a>
	&#183; Theme <a href="https://github.com/1bl4z3r/hermit-V2" target="_blank" rel="noopener">Hermit-V2</a></p></footer>
<script async src="https://msemjan.github.io/blog/js/bundle.min.c7c384e4d29d192bbac6811ae4660bb01767194a5bea56baca77e8260f93ea16.js" integrity="sha256-x8OE5NKdGSu6xoEa5GYLsBdnGUpb6la6ynfoJg+T6hY=" crossorigin="anonymous"></script><script async src="https://msemjan.github.io/blog/js/link-share.min.24409a4f6e5537d70ffc55ec8f9192208d718678cb8638585342423020b37f39.js" integrity="sha256-JECaT25VN9cP/FXsj5GSII1xhnjLhjhYU0JCMCCzfzk=" crossorigin="anonymous"></script>
</body>
</html>
